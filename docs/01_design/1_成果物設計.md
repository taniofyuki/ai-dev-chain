# 成果物設計

## 1. 配置ルール

### 1.1 対象アプリケーションのリポジトリ構成

```
/docs
  /spec
  /design
  /manual
  /reports

/src
/config
```

### 1.2 各ディレクトリの役割

- `/docs/spec`  
  アプリケーションの仕様の正本。要求仕様、設計書など、常に最新の内容を保持する。

- `/docs/design`  
  アーキテクチャ図、設計補足資料、設計検討メモなど、設計に関する補助資料を格納する。

- `/docs/manual`  
  利用者向けマニュアル、運用手順書など、運用フェーズで参照される文書を格納する。

- `/docs/reports`  
  各フェーズの実行結果を記録するレポートを格納する。  
  1フェーズにつき1ファイルを作成する。

- `/src`  
  アプリケーションのソースコードを格納する。

- `/config`  
  アプリケーションの設定ファイル、環境定義ファイルを格納する。

### 1.3 基本方針

- 仕様書とレポートを明確に分離する  
- フェーズ作業では、まず `/docs/spec` を更新し、その変更内容と判断を `/docs/reports` に記録する  
- `/docs/reports` は履歴と意思決定の記録を担う

---

## 2. フェーズ成果物ルール

### 2.1 レポート出力ルール

- **すべてのフェーズで必ず1つのレポートファイルを作成する**
- レポートは以下を必ず含む  
  - 実行概要  
  - 生成・更新した成果物の一覧（リンク付き）  
  - 重要な判断・決定事項  
  - 未解決事項  
  - 次フェーズへの引き継ぎ

### 2.2 仕様書更新ルール

- フェーズで仕様に変更が生じた場合、必ず `/docs/spec` の該当ファイルを更新する  
- レポートには、更新したファイル名と変更内容の要約を記録する  
- レポートは仕様の代替ではなく、変更履歴・判断履歴として扱う

---

## 3. テンプレート方針

### 3.1 テンプレート構成

```
/templates
  /default
  /overrides
```

### 3.2 運用ルール

- `/templates/default` に標準テンプレートを配置する  
- `/templates/overrides` に同名ファイルが存在する場合、そちらを優先して使用する  
- AIは **overrides → default** の順でテンプレートを選択する  
- テンプレートは成果物ファイルの構造（章立て・必須項目）を定義する  
- override は章立て・必須項目の調整を目的とし、必要最小限とする

---

## 4. バージョニング方針

### 4.1 バージョン管理の基本

- 成果物のバージョニングは **Gitを正本** とする  
- Gitの履歴が変更管理の唯一の信頼源となる

### 4.2 レポートによる履歴補完

- 各フェーズのレポートは以下の情報を記録する  
  - 実行日時  
  - 対象ブランチ / PR  
  - 生成・更新した成果物  
  - 重要な判断内容

### 4.3 補助メタ情報

- 必要に応じて `/docs/reports/_index.json` を作成し、  
  フェーズ、PR、成果物パス、状態などの機械可読な情報を管理する
